---
import JesseButton from "@/components/ui/buttons/JesseButton.astro";
import { useTranslations } from "@/i18n/utils";

const { lang } = Astro.params;
const currentLang = (lang as "en" | "es") || "en";
const t = useTranslations(currentLang);

const skills = [
    { name: "React", level: "Expert" },
    { name: "TypeScript", level: "Expert" },
    { name: "Node.js", level: "Advanced" },
    { name: "Python", level: "Advanced" },
    { name: "PostgreSQL", level: "Intermediate" },
    { name: "Docker", level: "Intermediate" },
    { name: "AWS", level: "Intermediate" },
    { name: "GraphQL", level: "Advanced" },
];
---

<section
    id='about'
    class='py-section min-h-screen relative exclusive-section flex items-center justify-center'
>
    <div class='max-w-content mx-auto px-4 w-full'>
        <div class='flex flex-col items-center gap-12 w-full'>
            <!-- Right Column: Content (now centered) -->
            <div class='space-y-8 w-full max-w-2xl'>
                <h2
                    class='text-4xl font-bold text-electric-blue text-center about-animate'
                >
                    {t("about.title")}
                </h2>
                {
                    t("about.description")
                        .split("\n")
                        .map((line) => (
                            <p class='text-lg text-light-gray text-center about-animate'>
                                {line}
                            </p>
                        ))
                }

                <!-- Stat Poker Chips -->
                <div class='flex gap-12 justify-center mt-8'>
                    <!-- Years -->
                    <div
                        class='relative w-32 h-32 flex flex-col items-center poker-chip-animated'
                    >
                        <img
                            src='/poker-chip-blue.svg'
                            alt={t("about.stats.years")}
                            class='w-full h-full'
                        />
                        <span class='chip-text chip-years'>
                            <span class='main'>{t("numbers.2plus")}</span>
                            <span class='sub'>{t("about.stats.years")}</span>
                        </span>
                    </div>
                    <!-- Impact -->
                    <div
                        class='relative w-32 h-32 flex flex-col items-center poker-chip-animated'
                    >
                        <img
                            src='/poker-chip-blue.svg'
                            alt={t("about.stats.users")}
                            class='w-full h-full'
                        />
                        <span class='chip-text chip-impact'>
                            <span class='main'>{t("chip.15kplus")}</span>
                            {
                                t("about.stats.users")
                                    .split("\n")
                                    .map((line) => (
                                        <span class='sub'>
                                            {line}
                                            <br />
                                        </span>
                                    ))
                            }
                        </span>
                    </div>
                    <!-- Passion -->
                    <div
                        class='relative w-32 h-32 flex flex-col items-center poker-chip-animated'
                    >
                        <img
                            src='/poker-chip-blue.svg'
                            alt={t("about.stats.passion")}
                            class='w-full h-full'
                        />
                        <span class='chip-text chip-passion'>
                            <span class='main'>&#8734;</span>
                            <span class='sub'>{t("about.stats.passion")}</span>
                        </span>
                    </div>
                </div>
                <!-- CTA JesseButton Row -->
                <div class='flex flex-wrap justify-center gap-6 mt-6'>
                    <a
                        href='https://github.com/zeikodev'
                        target='_blank'
                        rel='noopener noreferrer'
                    >
                        <JesseButton>
                            <span slot='icon'>
                                <svg
                                    xmlns='http://www.w3.org/2000/svg'
                                    fill='none'
                                    viewBox='0 0 24 24'
                                    stroke='currentColor'
                                    class='w-7 h-7'
                                >
                                    <path
                                        stroke-linecap='round'
                                        stroke-linejoin='round'
                                        stroke-width='2'
                                        d='M12 2C6.477 2 2 6.484 2 12.021c0 4.428 2.865 8.184 6.839 9.504.5.092.682-.217.682-.483 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.004.07 1.532 1.032 1.532 1.032.892 1.53 2.341 1.088 2.91.832.091-.647.35-1.088.636-1.339-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.987 1.029-2.686-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.295 2.748-1.025 2.748-1.025.546 1.378.202 2.397.1 2.65.64.699 1.028 1.593 1.028 2.686 0 3.847-2.338 4.695-4.566 4.944.359.309.678.919.678 1.852 0 1.336-.012 2.417-.012 2.747 0 .268.18.579.688.481C19.138 20.203 22 16.447 22 12.021 22 6.484 17.523 2 12 2z'
                                    ></path>
                                </svg>
                            </span>
                            {t("common.viewCode")}
                        </JesseButton>
                    </a>
                    <a
                        href='https://linkedin.com/in/juan-camilo-gonzalez-hoyos'
                        target='_blank'
                        rel='noopener noreferrer'
                    >
                        <JesseButton>
                            <span slot='icon'>
                                <svg
                                    xmlns='http://www.w3.org/2000/svg'
                                    fill='none'
                                    viewBox='0 0 24 24'
                                    stroke='currentColor'
                                    class='w-7 h-7'
                                >
                                    <path
                                        stroke-linecap='round'
                                        stroke-linejoin='round'
                                        stroke-width='2'
                                        d='M16 8a6 6 0 016 6v5a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4a2 2 0 00-4 0v4a1 1 0 01-1 1H7a1 1 0 01-1-1v-9a1 1 0 011-1h4a1 1 0 011 1v1.25M6 19a2 2 0 100-4 2 2 0 000 4z'
                                    ></path>
                                </svg>
                            </span>
                            {t("common.viewProject")}
                        </JesseButton>
                    </a>
                    <a href='mailto:zeiko@zeiko.dev'>
                        <JesseButton>
                            <span slot='icon'>
                                <svg
                                    xmlns='http://www.w3.org/2000/svg'
                                    fill='none'
                                    viewBox='0 0 24 24'
                                    stroke='currentColor'
                                    class='w-7 h-7'
                                >
                                    <path
                                        stroke-linecap='round'
                                        stroke-linejoin='round'
                                        stroke-width='2'
                                        d='M21 8.25V17a2 2 0 01-2 2H5a2 2 0 01-2-2V8.25m18 0A2 2 0 0019 6H5a2 2 0 00-2 2.25m18 0v.1a2 2 0 01-.553 1.39l-7.197 7.197a2 2 0 01-2.828 0L3.553 9.74A2 2 0 013 8.35v-.1'
                                    ></path>
                                </svg>
                            </span>
                            {t("common.contact")}
                        </JesseButton>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .py-section {
        padding-top: 120px;
        padding-bottom: 40px;
    }
    .poker-chip-animated {
        /* Remove animation by default, will be added dynamically */
        transition:
            transform 0.2s,
            box-shadow 0.2s;
    }
    .poker-chip-animated.bounce {
        animation: chip-bounce-in 1.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
    }
    @keyframes chip-bounce-in {
        0% {
            opacity: 0;
            transform: scale(0.7) translateY(60px);
        }
        60% {
            opacity: 1;
            transform: scale(1.1) translateY(-12px);
        }
        80% {
            transform: scale(0.96) translateY(4px);
        }
        100% {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }
    .about-animate {
        opacity: 0;
        transform: translateY(40px);
        transition:
            opacity 0.9s cubic-bezier(0.4, 0, 0.2, 1),
            transform 0.9s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .about-animate.visible {
        opacity: 1;
        transform: translateY(0);
    }
    .text-light-gray {
        color: #e2e8f0;
        line-height: 1.8;
    }
    .chip-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        text-align: center;
        color: #fff;
        font-weight: 900;
        text-shadow:
            0 2px 8px rgba(0, 0, 0, 0.25),
            0 1px 0 #222;
        pointer-events: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .chip-years .main {
        font-size: 1.4rem;
        font-weight: 900;
        line-height: 1.1;
    }
    .chip-years .sub {
        font-size: 0.7rem;
        font-weight: 500;
        margin-top: 0.1em;
        line-height: 1.1;
    }
    .chip-impact .main {
        font-size: 1.05rem;
        font-weight: 900;
        line-height: 1.1;
    }
    .chip-impact .sub {
        font-size: 0.6rem;
        font-weight: 500;
        margin-top: 0.1em;
        line-height: 1.1;
    }
    .chip-passion .main {
        font-size: 1.5rem;
        font-weight: 900;
        line-height: 1.1;
    }
    .chip-passion .sub {
        font-size: 0.7rem;
        font-weight: 500;
        margin-top: 0.1em;
        line-height: 1.1;
    }
</style>

<script>
    if (typeof window !== "undefined") {
        window.addEventListener("DOMContentLoaded", () => {
            const aboutSection =
                document.getElementById("about") ||
                document.querySelector(".exclusive-section");
            const chips = aboutSection
                ? aboutSection.querySelectorAll(".poker-chip-animated")
                : [];
            const aboutText = aboutSection
                ? aboutSection.querySelectorAll(".about-animate")
                : [];
            let animated = false;
            if (aboutSection && (chips.length || aboutText.length)) {
                const observer = new window.IntersectionObserver(
                    (entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting && !animated) {
                                aboutText.forEach((el, idx) => {
                                    setTimeout(
                                        () => el.classList.add("visible"),
                                        idx * 180,
                                    );
                                });
                                chips.forEach((chip, idx) => {
                                    setTimeout(
                                        () => chip.classList.add("bounce"),
                                        400 + idx * 120,
                                    );
                                });
                                animated = true;
                            }
                        });
                    },
                    { threshold: 0.4 },
                );
                observer.observe(aboutSection);
            }
        });
    }
</script>
